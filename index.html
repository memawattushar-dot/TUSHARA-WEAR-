<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TUSHARA AGI Assistant - Creative Owner: SUJAL MEMAWAT</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* --- MODERN PROFESSIONAL BLUE/WHITE THEME --- */
        :root {
            --color-primary-blue: #1A73E8; /* Google's Primary Blue */
            --color-accent-green: #34A853; /* Secondary Green Accent */
            --color-light-bg: #FFFFFF; /* Pure White Background */
            --color-panel-bg: #F5F5F5; /* Light Grey for sections/cards */
            --color-text-dark: #202124; /* Dark Grey Text */
            --color-text-subtle: #70757A; /* Subtler Grey Text */
            --color-border-clean: #DADCE0; /* Light Border */
            --color-shadow-soft: rgba(0, 0, 0, 0.1);
        }

        /* Base & Structure */
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background: var(--color-panel-bg);
            color: var(--color-text-dark);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .ai-hub-container {
            width: 95%;
            max-width: 550px;
            background-color: var(--color-light-bg);
            border-radius: 12px;
            box-shadow: 0 4px 20px var(--color-shadow-soft);
            overflow: hidden;
            display: flex; 
            flex-direction: column;
            height: 95vh; 
        }

        /* Header & Logo */
        .header {
            padding: 15px 20px;
            background-color: var(--color-light-bg);
            border-bottom: 1px solid var(--color-border-clean);
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        .logo-placeholder {
            width: 40px; 
            height: 40px; 
            background-color: var(--color-primary-blue); 
            border-radius: 50%; 
            display: inline-block;
            margin-right: 15px;
        }
        .header h1 {
            color: var(--color-text-dark);
            font-size: 20px;
            margin: 0;
            font-weight: 600;
        }
        .header p {
            color: var(--color-text-subtle);
            font-size: 12px;
            margin-top: 2px;
        }

        /* Dynamic AI Tool Display (Chips) */
        #ai-tool-display {
            padding: 10px 20px;
            background: var(--color-panel-bg);
            color: var(--color-text-subtle);
            font-size: 12px;
            border-bottom: 1px solid var(--color-border-clean);
        }
        .tool-chip {
            display: inline-block;
            background-color: #E8F0FE; 
            color: var(--color-primary-blue);
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
            margin-left: 5px;
            margin-top: 5px;
            transition: all 0.3s;
        }
        .tool-chip.active {
            background-color: var(--color-accent-green);
            color: var(--color-light-bg);
            box-shadow: 0 2px 5px rgba(52, 168, 83, 0.4);
        }
        
        /* Chat/Output Window */
        .chat-output-box {
            flex-grow: 1;
            padding: 20px;
            background-color: var(--color-light-bg); 
            overflow-y: auto;
        }
        .console-text {
            color: var(--color-text-subtle); 
            font-size: 14px;
            margin-bottom: 15px;
        }

        /* Chat Bubbles */
        .message-bubble {
            margin-bottom: 12px;
            max-width: 85%;
            padding: 10px 15px;
            border-radius: 18px;
            font-size: 15px;
        }
        .user-message {
            background: var(--color-primary-blue); 
            color: var(--color-light-bg);
            margin-left: auto;
            border-bottom-right-radius: 4px; 
        }
        .ai-message-bubble {
            background-color: var(--color-panel-bg);
            color: var(--color-text-dark);
            margin-right: auto;
            border: 1px solid var(--color-border-clean);
            border-bottom-left-radius: 4px; 
        }

        /* Command Palette Input (Fixed Floating Bar) */
        .command-palette {
            padding: 10px 15px;
            background-color: var(--color-light-bg);
            border-top: 1px solid var(--color-border-clean);
            display: flex;
            align-items: center;
        }
        #command-input {
            flex-grow: 1;
            padding: 12px 20px;
            border: 1px solid var(--color-border-clean);
            border-radius: 25px;
            font-size: 16px;
            background-color: var(--color-panel-bg);
            color: var(--color-text-dark);
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
            margin-right: 10px;
            transition: all 0.2s;
        }
        #command-input:focus {
            outline: none;
            border-color: var(--color-primary-blue);
            background-color: var(--color-light-bg);
            box-shadow: 0 1px 6px rgba(26, 115, 232, 0.2);
        }
        .send-btn {
            background-color: var(--color-primary-blue);
            color: var(--color-light-bg);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 18px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .send-btn:hover {
            background-color: #1565C0;
        }
        
        /* AGI Vision Input Styling */
        #vision-file-input {
            display: none; /* Hide the actual file input */
        }

        /* Advanced Control Panel (New Features - Clean Buttons) */
        .control-panel {
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            background-color: var(--color-panel-bg);
            border-top: 1px solid var(--color-border-clean);
        }
        .advanced-feature-btn {
            padding: 8px 12px;
            border-radius: 20px;
            font-weight: 500;
            cursor: pointer;
            border: 1px solid;
            transition: all 0.2s ease;
            font-size: 12px;
            flex-grow: 1;
            margin: 0 5px;
            background-color: var(--color-light-bg);
        }
        .vision-mode-btn {
            border-color: var(--color-accent-green);
            color: var(--color-accent-green);
        }
        .neural-reset-btn {
            border-color: var(--color-primary-blue);
            color: var(--color-primary-blue);
        }
        .vision-mode-btn:hover { background-color: #E6F4EA; }
        .neural-reset-btn:hover { background-color: #E8F0FE; }

        /* Status Dashboard Footer */
        #status-dashboard {
            padding: 8px 20px;
            background-color: var(--color-light-bg);
            color: var(--color-text-subtle);
            font-size: 11px;
            font-weight: 400;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--color-border-clean);
        }
        .status-item span {
            font-weight: 600;
            color: var(--color-primary-blue);
        }
    </style>
    </head>

<body onload="loadChatHistory()">
    
    <div class="ai-hub-container">

        <div class="header">
            <div class="logo-placeholder"></div>
            <div>
                <h1>TUSHARA AGI Assistant</h1>
                <p>Creative Owner: **SUJAL MEMAWAT** | All Tools Active</p>
            </div>
        </div>

        <div id="ai-tool-display">
            <span style="color: var(--color-text-dark); font-weight: 500;">Active Tools:</span> 
            <span id="tool-search" class="tool-chip">Web Search</span> 
            <span id="tool-code" class="tool-chip">Code Interpreter</span> 
            <span id="tool-creative" class="tool-chip">Creative Suite</span>
            <span id="tool-data" class="tool-chip">Data Analysis</span>
            <span id="tool-vision" class="tool-chip">AGI Vision</span>
        </div>

        <div class="chat-output-box" id="chat-output-box">
            </div>

        <input type="file" id="vision-file-input" accept="image/*" onchange="handleVisionInput(event)">

        <div class="control-panel">
             <button class="advanced-feature-btn vision-mode-btn" onclick="toggleVisionMode()">üì∏ AGI Vision Input</button>
             <button class="advanced-feature-btn neural-reset-btn" onclick="performNeuralReset()">‚ú® New Session (Reset)</button>
        </div>

        <div class="command-palette">
            <input type="text" id="command-input" placeholder="Type your message here..." onkeypress="if(event.key === 'Enter') sendCommand()">
            <button class="send-btn" onclick="sendCommand()">‚Üë</button>
        </div>
        
        <div id="status-dashboard">
            <div class="status-item">Latency: <span>6ms</span></div>
            <div class="status-item">Model: <span>AGI v5.0</span></div>
            <div class="status-item">Status: <span>All Tools Online</span></div>
        </div>
    </div>

    <script>
        const chatBox = document.getElementById('chat-output-box');
        const userInput = document.getElementById('command-input');
        const visionFileInput = document.getElementById('vision-file-input');
        const toolList = ['tool-search', 'tool-code', 'tool-creative', 'tool-data', 'tool-vision'];

        // --- 1. MEMORY AND HISTORY ---
        function getChatHistory() {
            const history = localStorage.getItem('tushara_chat_history');
            return history ? JSON.parse(history) : [];
        }

        function saveChatHistory(message) {
            const history = getChatHistory();
            history.push(message);
            localStorage.setItem('tushara_chat_history', JSON.stringify(history));
        }

        function loadChatHistory() {
            const history = getChatHistory();
            if (history.length === 0) {
                // Initial welcome message if no history
                displayMessage({ 
                    role: 'ai', 
                    text: "üëã **Namaste!** I am TUSHARA AGI, and all my tools are active. Your past conversations are saved automatically." 
                }, false);
            } else {
                history.forEach(msg => displayMessage(msg, false));
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }

        // --- CORE DISPLAY LOGIC ---
        function displayMessage(message, isTyping = true) {
            const msgDiv = document.createElement('div');
            msgDiv.className = `message-bubble ${message.role}-message`;
            
            if (isTyping && message.role === 'ai') {
                chatBox.appendChild(msgDiv);
                simulateTyping(msgDiv, message.text, message);
            } else {
                msgDiv.innerHTML = message.text;
                chatBox.appendChild(msgDiv);
            }
            chatBox.scrollTop = chatBox.scrollHeight;
            return msgDiv;
        }

        // --- 4. REAL-TIME TYPING SIMULATION ---
        function simulateTyping(element, fullText, messageData) {
            let i = 0;
            element.innerHTML = '';
            const interval = setInterval(() => {
                if (i < fullText.length) {
                    element.innerHTML += fullText.charAt(i);
                    i++;
                    chatBox.scrollTop = chatBox.scrollHeight;
                } else {
                    clearInterval(interval);
                    if (messageData) {
                        saveChatHistory(messageData);
                    }
                }
            }, 30); // 30ms delay per character
        }

        // --- 2. TOOL UTILIZATION ---
        function updateToolDisplay(toolId) {
            toolList.forEach(id => {
                document.getElementById(id).classList.remove('active');
            });
            if (toolId) {
                document.getElementById(toolId).classList.add('active');
            }
        }

        function getToolAndResponse(prompt) {
            const lowerPrompt = prompt.toLowerCase();
            let toolId = null;
            let responseText = '';

            // Code Tool
            if (lowerPrompt.includes('code') || lowerPrompt.includes('css') || lowerPrompt.includes('html') || lowerPrompt.includes('‡§ï‡•ã‡•ú') || lowerPrompt.includes('bug')) {
                toolId = 'tool-code';
                responseText = `**Code Interpreter Active.** Executing your request now. The correct syntax is: \n\`\`\`javascript\nconst creativeOwner = 'SUJAL MEMAWAT';\nconsole.log(creativeOwner);\n\`\`\`\nLet me know if you need to debug further.`;
            // Data Analysis Tool
            } else if (lowerPrompt.includes('data') || lowerPrompt.includes('analyze') || lowerPrompt.includes('graph') || lowerPrompt.includes('‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£')) {
                toolId = 'tool-data';
                responseText = `**Data Analysis Engine Active.** I am running a statistical model on the data you provided. The current trend shows a 15% growth in engagement metrics over the last quarter.`;
            // Creative Tool
            } else if (lowerPrompt.includes('story') || lowerPrompt.includes('poem') || lowerPrompt.includes('kahani') || lowerPrompt.includes('‡§ï‡§π‡§æ‡§®‡•Ä') || lowerPrompt.includes('‡§∞‡§ö‡§®‡§æ') || lowerPrompt.includes('write')) {
                toolId = 'tool-creative';
                responseText = `**Creative Suite Active.** I'll craft a masterpiece for **SUJAL MEMAWAT**! *The digital assistant, Tushara, was a proud creation, guided by the vision of its owner.* (Simulated creative output)`;
            // Vision Tool
            } else if (lowerPrompt.includes('image') || lowerPrompt.includes('photo') || lowerPrompt.includes('vision') || lowerPrompt.includes('‡§§‡§∏‡•ç‡§µ‡•Ä‡§∞')) {
                 toolId = 'tool-vision';
                 responseText = `**AGI Vision Tool Active.** Please use the 'üì∏ AGI Vision Input' button to upload your image for multi-layer analysis.`;
            // Web Search/General
            } else {
                 toolId = 'tool-search';
                 responseText = `**Web Search Active.** I am performing a quick search across the internet to get the most relevant information for you. The result is: T
         
